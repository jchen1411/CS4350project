package PomonaTransitSystem;

import java.util.Scanner;

public class PomonaTransitSystem {
    public static void main(String[] args) {
        System.out.println("Connecting to MS Access database...");

        // Check connectivity
        if (DatabaseConnectivity.checkConnection()) {
            System.out.println("Connection successful.");
            
            ScheduleEditor.displaySchedule("LA", "NY", "2024-08-02"); // correct format "YYYY-MM-DD"
            System.out.println(); 
            
            Scanner scanner = new Scanner(System.in);
            ScheduleEditor.TripOfferingEditor editor = new ScheduleEditor.TripOfferingEditor();
            while (true) {
                System.out.println("Schedule Editor - Choose an option:");
                System.out.println("1. Delete a trip offering");
                System.out.println("2. Add new trip offering");
                System.out.println("3. Change driver for a trip offering");
                System.out.println("4. Change bus for a trip offering");
                System.out.println("5. Display stops for a trip");
                System.out.println("6. Exit");
                System.out.print("Enter your choice: ");
                int choice = scanner.nextInt();
                System.out.println(); 
                switch (choice) {
                    case 1:
                        System.out.println("Enter TripNumber to delete:");
                        int tripNumberToDelete = scanner.nextInt();
                        scanner.nextLine(); // consume newline
                        System.out.println("Enter Date to delete (YYYY-MM-DD):");
                        String dateToDelete = scanner.nextLine();
                        System.out.println("Enter ScheduledStartTime to delete (HH:MM:SS):");
                        String startTimeToDelete = scanner.nextLine();
                        editor.deleteTripOffering(tripNumberToDelete, dateToDelete, startTimeToDelete);
                        break;
                    case 2:
                        editor.addTripOfferings();
                        break;
                    case 3:
                        System.out.println("Enter TripNumber to change driver:");
                        int tripNumberToChangeDriver = scanner.nextInt();
                        scanner.nextLine(); // consume newline
                        System.out.println("Enter Date to change driver (YYYY-MM-DD):");
                        String dateToChangeDriver = scanner.nextLine();
                        System.out.println("Enter ScheduledStartTime to change driver (HH:MM:SS):");
                        String startTimeToChangeDriver = scanner.nextLine();
                        System.out.println("Enter new DriverName:");
                        String newDriverName = scanner.nextLine();
                        editor.changeDriver(tripNumberToChangeDriver, dateToChangeDriver, startTimeToChangeDriver, newDriverName);
                        break;
                    case 4:
                        System.out.println("Enter TripNumber to change bus:");
                        int tripNumberToChangeBus = scanner.nextInt();
                        scanner.nextLine(); // consume newline
                        System.out.println("Enter Date to change bus (YYYY-MM-DD):");
                        String dateToChangeBus = scanner.nextLine();
                        System.out.println("Enter ScheduledStartTime to change bus (HH:MM:SS):");
                        String startTimeToChangeBus = scanner.nextLine();
                        System.out.println("Enter new BusID:");
                        int newBusID = scanner.nextInt();
                        scanner.nextLine();  
                        editor.changeBus(tripNumberToChangeBus, dateToChangeBus, startTimeToChangeBus, newBusID);
                        break;
                    case 5:
                        System.out.println("Enter TripNumber to display stops:");
                        int tripNumberToDisplayStops = scanner.nextInt();
                        scanner.nextLine(); // consume newline
                        DisplayTripStops.displayTripStops(tripNumberToDisplayStops);
                        break;
                    case 6:
                        System.out.println("Exiting...");
                        scanner.close();
                        System.exit(0);
                        break;
                    default:
                        System.out.println("Invalid choice. Please try again.");
                }
            }
            
        } else {
            System.out.println("Failed to connect to the database.");
        }
    }
}
